<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Introduction - LovyanGFX Documentation</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <nav class="sidebar">
        <div class="logo">
          <h2>LovyanGFX</h2>
          <p class="version">Documentation API</p>
        </div>
        <ul class="nav-menu">
          <li><a href="index.html">üè† Accueil</a></li>
          <li>
            <a href="introduction.html" class="active">üìñ Introduction</a>
          </li>
          <li><a href="initialisation.html">‚öôÔ∏è Initialisation</a></li>
          <li><a href="couleurs.html">üé® Gestion des Couleurs</a></li>
          <li><a href="formes.html">üìê Dessiner des Formes</a></li>
          <li><a href="texte.html">‚úçÔ∏è Affichage de Texte</a></li>
          <li><a href="images.html">üñºÔ∏è Gestion des Images</a></li>
          <li><a href="sprites.html">üéÆ Sprites (Offscreen)</a></li>
          <li><a href="avance.html">üöÄ Fonctions Avanc√©es</a></li>
          <li><a href="exemples.html">üí° Exemples Pratiques</a></li>
        </ul>
      </nav>

      <main class="content">
        <header class="page-header">
          <h1>üìñ Introduction √† LovyanGFX</h1>
          <p class="subtitle">Comprendre les concepts fondamentaux</p>
        </header>

        <section class="intro-section">
          <div class="card">
            <h2>üéØ Qu'est-ce que LovyanGFX ?</h2>
            <p>
              LovyanGFX est une biblioth√®que graphique moderne con√ßue pour les
              syst√®mes embarqu√©s, principalement les microcontr√¥leurs ESP32 et
              compatibles. Elle offre une API riche et intuitive pour contr√¥ler
              des √©crans LCD, OLED et EPD (papier √©lectronique).
            </p>

            <h3>Avantages par rapport aux autres biblioth√®ques</h3>
            <ul>
              <li>
                <strong>Performance sup√©rieure</strong> : Utilisation optimis√©e
                du DMA et des p√©riph√©riques mat√©riels
              </li>
              <li>
                <strong>Support ESP-IDF</strong> : Compatible ArduinoESP32 ET
                ESP-IDF
              </li>
              <li>
                <strong>Modes couleur multiples</strong> : Support 16 bits ET 24
                bits
              </li>
              <li>
                <strong>Traitement parall√®le</strong> : Ex√©cution d'autres
                t√¢ches pendant le transfert DMA
              </li>
              <li>
                <strong>Sprites avanc√©s</strong> : Rotation et zoom rapides des
                buffers off-screen
              </li>
              <li>
                <strong>Multi-√©crans</strong> : Utilisation simultan√©e de
                plusieurs √©crans
              </li>
              <li>
                <strong>R√©duction automatique</strong> : Gestion intelligente
                des √©crans monochromes
              </li>
              <li>
                <strong>Portabilit√© PC</strong> : Test sur PC avec OpenCV/SDL2
              </li>
            </ul>
          </div>

          <div class="card">
            <h2>üèóÔ∏è Architecture de la Biblioth√®que</h2>
            <p>LovyanGFX est organis√© en couches logiques :</p>

            <div class="method-card">
              <h3>Couche Panel (Panneau)</h3>
              <p>
                G√®re la communication bas niveau avec l'√©cran physique. Supporte
                diff√©rents types de panneaux :
              </p>
              <ul>
                <li>ILI9341, ILI9342, ILI9481, ILI9486, ILI9488</li>
                <li>ST7735, ST7789, ST7796</li>
                <li>SSD1306, SSD1327, SSD1331, SSD1351</li>
                <li>GC9A01, GC9107</li>
                <li>IT8951 (M5Paper)</li>
                <li>Et bien d'autres...</li>
              </ul>
            </div>

            <div class="method-card">
              <h3>Couche Bus (Communication)</h3>
              <p>G√®re les protocoles de communication :</p>
              <ul>
                <li>
                  <strong>SPI</strong> : Communication s√©rie rapide (mode HW ou
                  SW)
                </li>
                <li>
                  <strong>I2C</strong> : Communication s√©rie avec adressage
                  (mode HW ou SW)
                </li>
                <li>
                  <strong>Parallel 8-bit</strong> : Interface parall√®le 8 bits
                  (I2S sur ESP32)
                </li>
                <li>
                  <strong>Parallel 16-bit</strong> : Interface parall√®le 16 bits
                  (ESP32-S2/S3)
                </li>
                <li><strong>RGB</strong> : Interface RGB direct (ESP32-S3)</li>
              </ul>
            </div>

            <div class="method-card">
              <h3>Couche LGFX (Interface Graphique)</h3>
              <p>API de haut niveau pour dessiner sur l'√©cran :</p>
              <ul>
                <li>Formes g√©om√©triques (lignes, rectangles, cercles...)</li>
                <li>Texte avec diff√©rentes polices</li>
                <li>Images (BMP, JPG, PNG, QOI)</li>
                <li>Sprites et transformations</li>
                <li>Gestion des couleurs et palettes</li>
              </ul>
            </div>
          </div>

          <div class="card">
            <h2>üì¶ Structure des Objets Principaux</h2>

            <table>
              <thead>
                <tr>
                  <th>Classe</th>
                  <th>Description</th>
                  <th>Usage</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>LGFX</code></td>
                  <td>Instance principale de l'√©cran</td>
                  <td>Dessiner directement sur l'√©cran physique</td>
                </tr>
                <tr>
                  <td><code>LGFX_Sprite</code></td>
                  <td>Buffer hors-√©cran (sprite)</td>
                  <td>Cr√©er des animations et transformations</td>
                </tr>
                <tr>
                  <td><code>Panel_*</code></td>
                  <td>Configuration du panneau d'√©cran</td>
                  <td>D√©finir les param√®tres hardware</td>
                </tr>
                <tr>
                  <td><code>Bus_*</code></td>
                  <td>Configuration du bus de communication</td>
                  <td>D√©finir les pins et param√®tres de com</td>
                </tr>
                <tr>
                  <td><code>Light_*</code></td>
                  <td>Contr√¥le du r√©tro√©clairage</td>
                  <td>G√©rer la luminosit√©</td>
                </tr>
                <tr>
                  <td><code>Touch_*</code></td>
                  <td>Gestion de l'√©cran tactile</td>
                  <td>D√©tecter les touches utilisateur</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="card">
            <h2>üé® Syst√®me de Couleurs</h2>
            <p>LovyanGFX supporte trois formats de couleur principaux :</p>

            <table>
              <thead>
                <tr>
                  <th>Format</th>
                  <th>Bits</th>
                  <th>Couleurs</th>
                  <th>Usage</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>RGB332</code></td>
                  <td>8 bits</td>
                  <td>256 couleurs</td>
                  <td>√âconomie de m√©moire, √©crans simples</td>
                </tr>
                <tr>
                  <td><code>RGB565</code></td>
                  <td>16 bits</td>
                  <td>65 536 couleurs</td>
                  <td>Bon compromis vitesse/qualit√©</td>
                </tr>
                <tr>
                  <td><code>RGB888</code></td>
                  <td>24 bits</td>
                  <td>16,7 millions</td>
                  <td>Meilleure qualit√©, plus de m√©moire</td>
                </tr>
              </tbody>
            </table>

            <div class="info-box" style="margin-top: 1.5rem">
              <h3>üí° Conseil</h3>
              <p>
                Utilisez <code>RGB565</code> pour la plupart des applications.
                C'est le meilleur compromis entre qualit√© visuelle, vitesse de
                transfert et consommation m√©moire. Passez √†
                <code>RGB888</code> uniquement si vous avez besoin de d√©grad√©s
                tr√®s fins ou de photos haute qualit√©.
              </p>
            </div>
          </div>

          <div class="card">
            <h2>‚ö° Optimisation des Performances</h2>

            <h3>1. Utiliser startWrite() / endWrite()</h3>
            <pre><code class="language-cpp">// ‚ùå Lent : Acquisition/lib√©ration du bus √† chaque appel
lcd.drawPixel(0, 0, 0xFF0000);
lcd.drawPixel(1, 1, 0x00FF00);
lcd.drawPixel(2, 2, 0x0000FF);

// ‚úÖ Rapide : Bus acquis une seule fois
lcd.startWrite();
lcd.drawPixel(0, 0, 0xFF0000);
lcd.drawPixel(1, 1, 0x00FF00);
lcd.drawPixel(2, 2, 0x0000FF);
lcd.endWrite();</code></pre>

            <h3>2. Utiliser les fonctions write~()</h3>
            <pre><code class="language-cpp">// Pour les boucles intensives
lcd.startWrite();
for (int x = 0; x < 100; x++) {
    for (int y = 0; y < 100; y++) {
        lcd.writePixel(x, y, color); // Plus rapide que drawPixel
    }
}
lcd.endWrite();</code></pre>

            <h3>3. Utiliser des Sprites pour les animations</h3>
            <pre><code class="language-cpp">// Pr√©parer l'image dans un sprite
sprite.fillRect(0, 0, 50, 50, RED);
sprite.fillCircle(25, 25, 20, BLUE);

// Afficher avec rotation/zoom (tr√®s rapide)
sprite.pushRotateZoom(x, y, angle, zoom, zoom);</code></pre>

            <h3>4. DMA pour les gros transferts</h3>
            <pre><code class="language-cpp">// Transfert DMA asynchrone (ne bloque pas le CPU)
lcd.pushImageDMA(0, 0, width, height, imageData);</code></pre>
          </div>

          <div class="card warning-box">
            <h2>‚ö†Ô∏è Points d'Attention</h2>
            <ul>
              <li>
                <strong>Gestion de la m√©moire</strong> : Les sprites consomment
                de la RAM. Un sprite 320x240 en RGB565 utilise 150 Ko !
              </li>
              <li>
                <strong>Bus SPI partag√©</strong> : Si vous utilisez une carte SD
                sur le m√™me bus SPI, lib√©rez toujours le bus avec
                <code>endWrite()</code> avant d'acc√©der √† la SD
              </li>
              <li>
                <strong>√âcrans EPD</strong> : Les papiers √©lectroniques
                n√©cessitent <code>endWrite()</code> ou
                <code>display()</code> pour actualiser l'affichage
              </li>
              <li>
                <strong>Multithread</strong> : LovyanGFX n'est pas thread-safe
                par d√©faut. Utilisez des mutex si n√©cessaire
              </li>
              <li>
                <strong>D√©bordement</strong> : Les fonctions de dessin ne
                v√©rifient pas automatiquement les limites. Utilisez
                <code>setClipRect()</code> pour d√©finir une zone de dessin
              </li>
            </ul>
          </div>

          <div class="card">
            <h2>üîÑ Flux de Travail Typique</h2>
            <ol style="line-height: 2">
              <li>
                <strong>Initialisation</strong> : Cr√©er et configurer l'instance
                LGFX
              </li>
              <li>
                <strong>Configuration</strong> : D√©finir rotation, luminosit√©,
                profondeur couleur
              </li>
              <li>
                <strong>Dessin</strong> : Utiliser les fonctions de dessin
              </li>
              <li>
                <strong>Actualisation</strong> : Appeler
                <code>display()</code> si n√©cessaire (EPD)
              </li>
              <li><strong>Boucle</strong> : R√©p√©ter les √©tapes 3-4</li>
            </ol>

            <pre><code class="language-cpp">#include &lt;LovyanGFX.hpp&gt;

static LGFX lcd;

void setup() {
    // 1. Initialisation
    lcd.init();
    
    // 2. Configuration
    lcd.setRotation(1);
    lcd.setBrightness(200);
    lcd.setColorDepth(16);
    
    // 3. Dessin initial
    lcd.fillScreen(BLACK);
    lcd.setTextColor(WHITE);
    lcd.drawString("Pr√™t!", 10, 10);
}

void loop() {
    // 4. Animation
    lcd.startWrite();
    // ... dessiner ici ...
    lcd.endWrite();
    
    delay(16); // ~60 FPS
}</code></pre>
          </div>

          <div class="card">
            <h2>üìö Prochaines √âtapes</h2>
            <p>
              Maintenant que vous comprenez les bases, explorez les sections
              suivantes :
            </p>
            <ul>
              <li>
                <a href="initialisation.html">‚öôÔ∏è Initialisation</a> : Comment
                configurer votre √©cran
              </li>
              <li>
                <a href="couleurs.html">üé® Gestion des Couleurs</a> : Travailler
                avec les couleurs
              </li>
              <li>
                <a href="formes.html">üìê Dessiner des Formes</a> : API de dessin
              </li>
              <li>
                <a href="exemples.html">üí° Exemples Pratiques</a> : Code complet
              </li>
            </ul>
          </div>
        </section>

        <footer class="page-footer">
          <p>
            Documentation LovyanGFX |
            <a href="index.html">Retour √† l'accueil</a>
          </p>
        </footer>
      </main>
    </div>
    <script src="sidebar-sections.js"></script>
  </body>
</html>
